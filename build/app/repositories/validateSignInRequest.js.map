{"version":3,"sources":["../../../src/app/repositories/validateSignInRequest.js"],"names":["membersModel","db","validateSignInRequest","req","res","next","usernameObj","body","username","console","info","findOne","where","then","obj","json","success","messege","password","e","log","message"],"mappings":";;;;;;;;;;;;;AAAA;;AAEA,IAAMA,YAAY,GAAGC,eAAGD,YAAxB;;SAEsBE,qB;;;;;yGAAf,iBAAqCC,GAArC,EAA0CC,GAA1C,EAA+CC,IAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAEH;AACJ;AACA;AACA;AACA;AAEQC,YAAAA,WARD,GAQe;AACd,oCAAeH,GAAG,CAACI,IAAJ,CAASC,QAAxB;AADc,aARf;AAYHC,YAAAA,OAAO,CAACC,IAAR,CAAa,gBAAgBJ,WAAW,CAACE,QAAzC;AAZG;AAAA,mBAcGR,YAAY,CAACW,OAAb,CAAqB;AAAEC,cAAAA,KAAK,EAAEN;AAAT,aAArB,EAA6CO,IAA7C,CAAkD,UAACC,GAAD,EAAS;AAE7D;AACA,kBAAG,CAACA,GAAJ,EAAS,OAAOV,GAAG,CAACW,IAAJ,CAAS;AAAEC,gBAAAA,OAAO,EAAE,KAAX;AAAkBC,gBAAAA,OAAO,EAAE;AAA3B,eAAT,CAAP;AAET,kBAAIC,QAAQ,GAAGf,GAAG,CAACI,IAAJ,CAASW,QAAxB;;AAEA,kBAAIA,QAAQ,KAAKJ,GAAG,CAACI,QAArB,EAA+B;AAC3Bb,gBAAAA,IAAI;AACP,eAFD,MAEO;AACHD,gBAAAA,GAAG,CAACW,IAAJ,CAAS;AAAEC,kBAAAA,OAAO,EAAE,KAAX;AAAkBC,kBAAAA,OAAO,EAAE;AAA3B,iBAAT;AACH;AAEJ,aAbK,WAaG,UAACE,CAAD,EAAO;AACZV,cAAAA,OAAO,CAACW,GAAR,CAAY,mBAAmBD,CAA/B;AACAf,cAAAA,GAAG,CAACW,IAAJ,CAAS;AACLC,gBAAAA,OAAO,EAAE,KADJ;AAELK,gBAAAA,OAAO,EAAEF;AAFJ,eAAT;AAIH,aAnBK,CAdH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import db from '../../config/db.config'\r\n\r\nconst membersModel = db.membersModel;\r\n\r\nexport async function validateSignInRequest(req, res, next) {\r\n\r\n    /*  \r\n    1.Find membersModel by Username\r\n    2.IF record > { 0 check password } else { return no username in system }\r\n    3.validate password if pass { next() } else { return worng password }\r\n    */\r\n\r\n    let usernameObj = {\r\n        'username': `${req.body.username}`\r\n    }\r\n\r\n    console.info('Username : ' + usernameObj.username)\r\n\r\n    await membersModel.findOne({ where: usernameObj }).then((obj) => {\r\n\r\n        /* case username wrong */\r\n        if(!obj) return res.json({ success: false, messege: 'username is incorrect' })\r\n\r\n        let password = req.body.password\r\n\r\n        if (password === obj.password) {\r\n            next()\r\n        } else {\r\n            res.json({ success: false, messege: 'password is incorrect' })\r\n        }\r\n\r\n    }).catch((e) => {\r\n        console.log(\"catch error  :\" + e)\r\n        res.json({\r\n            success: false,\r\n            message: e\r\n        })\r\n    })\r\n}"],"file":"validateSignInRequest.js"}